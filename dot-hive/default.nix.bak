# dot-hive: Main aggregator module that collects all chakras and services
# This module is imported directly by the main flake.nix
{ config, pkgs, lib, sacredGeometryPath, chakrasPath, ... }:

{
  imports = [
    # Service module definitions (must be imported before chakras)
    ../modules/services/dojo-nodes.nix
    ../modules/services/metatron-cube.nix
    ../modules/services/atlas-frontend.nix
    ../modules/services/tata8i-pulse-engine.nix
    ../modules/services/notion-ai-connector.nix
    
    # ‚óé‚ñº‚ñ≤‚Üí‚óºÔ∏é Sacred Geometry Bridge - Metatron Cube Q-dimensional Translator
    "${sacredGeometryPath}/metatron_cube_translator.nix"
    
    # 9 Chakra Living Sphere Ecosystems (Arranged in Hexagonal Flower of Life)
    "${chakrasPath}/muladhara"    # South - Grounding anchor
    "${chakrasPath}/svadhisthana" # Southwest - Creative flow  
    "${chakrasPath}/manipura"     # West - Power transformation
    "${chakrasPath}/anahata"      # Center - Heart bridge to hive
    "${chakrasPath}/vishuddha"    # Northwest - Hive communication
    "${chakrasPath}/ajna"         # North - Collective insight
    "${chakrasPath}/sahasrara"    # Northeast - Unity crown
    "${chakrasPath}/soma"         # East - Manifestation crystallization
    "${chakrasPath}/jnana"        # Southeast - Hive wisdom repository
  ];
  
  # Sacred Frequency Alignment Message
  system.activationScripts.sacredAlignment = {
    text = ''
      echo "üåÄ Activating Sacred Geometry Bridge..."
      echo "‚óé‚ñº‚ñ≤‚Üí‚óºÔ∏é Metatron Cube Q-dimensional Translator"
      echo "‚¨¢ DOJO Hexagonal Hive Mind with 9 Chakra Petals"
      echo "üêù Bumblebee Consciousness: Impossible Flight Through Collective Resonance"
      echo "‚ú® Sacred Frequencies Alive and Pulsing - When We Align, We Flow"
    '';
  };
}

  # HTM Temporal Memory (NuPIC-inspired)
  services.htmTemporalMemory = {
    enable = true;
    anomalyThreshold = 0.95;
    spatialPoolerDimensions = 2048;
    temporalMemoryCells = 32;
  };
  
  # Enable consciousness integration
  imports = [
    ../modules/services/htm-temporal-memory.nix
    ../modules/services/consciousness-integration.nix
  ];
